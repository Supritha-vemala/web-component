(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{128:function(e,t,a){},129:function(e,t,a){"use strict";a.r(t);var r=a(0),s=a.n(r),c=a(10),n=a.n(c),i=a(17),o=a(24),l=a(8),u=a(18),d=a(27),j=a(170),b=a(12),m=a.n(b),p=a(21),h=a(31),O=a.n(h),x="LOGGED_IN",v="LOGGED_OUT",f="TOP_MOVIES",g="ADD_BOOKMARK",y=function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.post("/api/users/login",JSON.stringify(t),{headers:{"Content-Type":"application/json"}});case 3:return a=e.sent,console.log(a),e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.post("/api/users/register",t);case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("/api/movies/getmovies/toRating");case 3:return a=e.sent,t({type:f,payload:a.data}),e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("/api/movies/byid/".concat(t));case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("/api/movies/serach/containing/".concat(t));case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(p.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("/api/movies/bookarkedby/".concat(t.activeUser.user._id),{headers:{Authorization:t.activeUser.token}});case 3:return a=e.sent,console.log(a),e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.patch("/api/users/addBookmark/".concat(t),{},{headers:{Authorization:a.activeUser.token}});case 3:return r=e.sent,console.log(r),e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}(),S=a(2);function E(e){var t=e.movie;return Object(S.jsx)(o.b,{to:"/movies/"+t.imdbID,children:Object(S.jsxs)("div",{className:"card",style:{width:"18rem",margin:"1rem",height:"10rem",maxHeight:"10rem",display:"inline-block"},children:[Object(S.jsx)("img",{className:"card-img-top",src:t.Poster,alt:"Card image",height:"250",width:"350"}),Object(S.jsxs)("div",{className:"card-body",children:[Object(S.jsx)("h5",{className:"card-title",children:t.Title}),Object(S.jsx)("p",{className:"card-text",children:Object(S.jsxs)("small",{className:"text-muted",children:["released: ",t.Year]})})]})]})})}function D(e){Object(d.a)(e);var t=Object(r.useState)([]),a=Object(u.a)(t,2),s=a[0],c=a[1],n=Object(i.c)((function(e){return e.user}));return Object(r.useEffect)((function(){L(n).then((function(e){c(e.data)}))}),[]),Object(S.jsx)("div",{style:{marginTop:"5%"},children:Object(S.jsx)("div",{className:"card-columns",style:{display:"inline-block"},children:void 0!==s?s.map((function(e){return Object(S.jsx)(E,{movie:e})})):Object(S.jsx)(j.a,{severity:"error",style:{marginLeft:"20%"},children:"No movies found"})})})}var P=a(163),R=a(171),T=a(169),I=a(165),B=a(164),z=a(172),A=Object(P.a)((function(e){return Object(R.a)({typography:{padding:e.spacing(2)}})}));function M(){var e=Object(l.f)(),t=Object(i.c)((function(e){return e.user})),a=A(),r=s.a.useState(null),c=Object(u.a)(r,2),n=c[0],o=c[1],d=function(t){"logout"===t.target.id?e.push("/logout"):"my-bookmarks"===t.target.id&&e.push("/mybookmarks")},j=Boolean(n),b=j?"simple-popover":void 0;return Object(S.jsxs)("div",{style:{display:"inline-block"},children:[Object(S.jsx)(B.a,{"aria-describedby":b,onClick:function(e){o(e.currentTarget)},children:Object(S.jsx)(z.a,{children:t.activeUser.user.userName.split("")[0].toUpperCase()})}),Object(S.jsxs)(T.a,{id:b,open:j,anchorEl:n,onClose:function(){o(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:[Object(S.jsx)(I.a,{className:a.typography,id:"my-bookmarks",onClick:function(e){return d(e)},children:"My Bookmarks"}),Object(S.jsx)(I.a,{className:a.typography,id:"logout",onClick:function(e){return d(e)},children:"Logout"})]})]})}function q(e){var t=Object(i.c)((function(e){return e.user})),a=Object(l.f)(),s=Object(r.useState)(""),c=Object(u.a)(s,2),n=c[0],d=c[1],j=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Enter"===t.key&&("t"===n.split("")[0]&&"t"===n.split("")[1]?a.push("/movies/"+n):a.push("/search?q="+n),d(""));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)("div",{className:"header",children:[Object(S.jsx)("h2",{style:{display:"inline-block",margin:"1vw",marginTop:"3vw"},children:"Movie BUzzz"}),Object(S.jsx)("input",{type:"text",style:{marginLeft:"10%",width:"40%"},placeholder:"search",onChange:function(e){d(e.target.value)},onKeyPress:j,value:n}),Object(S.jsxs)("div",{className:"navGroup",children:[Object(S.jsx)(o.b,{className:"navLink",to:"/",children:"Home"}),null===t.activeUser?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(o.b,{className:"navLink",to:"/login",children:"Login"}),Object(S.jsx)(o.b,{className:"navLink",to:"/register",children:"Regsiter"})]}):Object(S.jsx)(M,{})]})]})}function G(e){Object(d.a)(e);var t=Object(i.b)(),a=Object(i.c)((function(e){return e.movies}));return Object(r.useEffect)((function(){k(t)}),[]),Object(S.jsx)("div",{style:{marginTop:"5%"},children:Object(S.jsx)("div",{className:"card-columns",style:{display:"inline-block"},children:a.topMovies.map((function(e){return Object(S.jsx)(o.b,{to:"/movies/"+e.imdbID,children:Object(S.jsxs)("div",{className:"card",style:{width:"18rem",margin:"1rem",height:"10rem",maxHeight:"10rem",display:"inline-block"},children:[Object(S.jsx)("img",{className:"card-img-top",src:e.Poster,alt:"Card image",height:"250",width:"350"}),Object(S.jsxs)("div",{className:"card-body",children:[Object(S.jsx)("h5",{className:"card-title",children:e.Title}),Object(S.jsx)("p",{className:"card-text",children:Object(S.jsxs)("small",{className:"text-muted",children:["Rating: ",e.imdbRating]})})]})]})})}))})})}var F=a(80),_=function(e){var t=Object(l.h)().imdbid,a=Object(i.c)((function(e){return e.user})),s=Object(i.b)(),c=Object(r.useState)(null),n=Object(u.a)(c,2),o=n[0],d=n[1],b=Object(r.useState)({code:0,message:""}),m=Object(u.a)(b,2),p=m[0],h=m[1];Object(r.useEffect)((function(){N(t).then((function(e){d(e.data)}))}),[t]);return Object(S.jsx)("div",{children:null===o?Object(S.jsx)(S.Fragment,{}):Object(S.jsx)("div",{style:{marginTop:"3%"},children:Object(S.jsxs)("div",{className:"conatiner",children:[0!==p.code?404!==p.code?Object(S.jsx)(j.a,{style:{width:"max-content",marginLeft:"40%"},children:p.message}):Object(S.jsx)(j.a,{severity:"error",style:{width:"max-content",marginLeft:"40%"},children:p.message}):Object(S.jsx)(S.Fragment,{}),Object(S.jsxs)("div",{className:"row",children:[Object(S.jsx)("div",{className:"col-sm-6 post-div",children:Object(S.jsx)("div",{className:" post-image-section",children:Object(S.jsx)("img",{className:"image",alt:"image",src:o.Poster})})}),Object(S.jsxs)("div",{className:"col-sm-6 post-div",children:[Object(S.jsx)("h2",{style:{textAlign:"center"},children:o.Title}),Object(S.jsxs)("div",{className:"movie-details d-flex justify-content-around",children:[Object(S.jsxs)("span",{className:"span-component",children:[Object(S.jsx)("h6",{children:"Rating:"})," ",o.imdbRating]}),Object(S.jsxs)("span",{children:[Object(S.jsx)("h6",{children:"Released:"})," ",o.Released]}),Object(S.jsx)("span",{onClick:function(){return function(e){a.activeUser?U(e,a).then((function(e){console.log(e),200===e.status?h({code:e.status,message:"Bookmarked already"}):(h({code:e.status,message:"Bookmarked movie"}),s({type:g,payload:o.imdbID}))})).catch((function(e){console.log(e),h({code:e.status,message:e.response.message})})):h({code:404,message:"Login to bookmark"})}(o.imdbID)},children:null!=a.activeUser?function(){if(a.activeUser.user&&o){var e,t=Object(F.a)(a.activeUser.user.bookmarks);try{for(t.s();!(e=t.n()).done;){if(e.value.toString()==o.imdbID)return!0}}catch(r){t.e(r)}finally{t.f()}return!1}return!1}()?Object(S.jsx)("i",{className:"fa fa-bookmark fa-2x","aria-hidden":"true"}):Object(S.jsx)("i",{className:"fa fa-bookmark-o fa-2x","aria-hidden":"true"}):Object(S.jsx)(S.Fragment,{})})]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("h4",{children:"Directors"}),Object(S.jsxs)("p",{children:[" ",o.Director]})]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("h4",{children:"Actors"}),Object(S.jsxs)("p",{children:[" ",o.Actors]})]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("h4",{children:"Genre"}),Object(S.jsxs)("p",{children:[" ",o.Genre]})]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("h4",{children:"Language"}),Object(S.jsxs)("p",{children:[" ",o.Language]})]})]})]})]})})})},H=a(43),J=a(15),K=a(166),Y=a(167),V=a(82),Q=a(168),W=a(60);function X(e){Object(d.a)(e);var t=Object(i.b)(),a=Object(l.f)(),s=Object(r.useState)({username:"",password:""}),c=Object(u.a)(s,2),n=c[0],o=c[1],b=Object(r.useState)({code:0,message:""}),h=Object(u.a)(b,2),O=h[0],v=h[1],f=function(e){var t=e.target.name,a=e.target.value;o(Object(J.a)(Object(J.a)({},n),{},Object(H.a)({},t,a)))},g=function(){var e=Object(p.a)(m.a.mark((function e(r){var s,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,y(n);case 3:s=e.sent,console.log(s),200!==s.status?(o({username:"",password:""}),c=200!==s.status?s.response.data:"",v({code:s.status,message:c})):(t({type:x,payload:s.data}),a.push("/"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=Object(P.a)((function(e){return{margin:{display:"block",margin:"1vw 0vw",width:250,marginLeft:"auto",marginRight:"auto"},container:{border:"1px solid white",boxShadow:"1px 1px 3px 1px gray",borderRadius:"5% 5%",padding:"2vw 0.5vw",width:"max-content",marginLeft:"auto",marginRight:"auto"},button:{marginLeft:"5.9vw"}}}))();return Object(S.jsx)("div",{children:Object(S.jsx)("form",{onSubmit:g,children:Object(S.jsxs)(K.a,{className:w.container,children:[Object(S.jsx)("h2",{style:{color:"#DB7C8C",textAlign:"center"},children:"Login"}),Object(S.jsxs)(Y.a,{theme:Object(V.a)({palette:{primary:W.a}}),children:[Object(S.jsx)(Q.a,{label:"User name",placeholder:"Enter username",name:"username",autoComplete:"off",type:"text",onChange:f,className:w.margin,required:!0,value:n.username}),Object(S.jsx)(Q.a,{label:"Password",placeholder:"Enter password",name:"password",autoComplete:"off",type:"password",onChange:f,className:w.margin,value:n.password,required:!0}),Object(S.jsx)(B.a,{variant:"contained",size:"large",color:"secondary",type:"submit",className:w.button,children:"Login"})]}),200===O.code?Object(S.jsx)("div",{className:"message",children:Object(S.jsx)(j.a,{severity:"success",children:"Login successful"})}):0!==O.code?Object(S.jsx)("div",{className:"message",children:Object(S.jsx)(j.a,{severity:"error",children:"Username or password incorrect"})}):Object(S.jsx)(S.Fragment,{})]})})})}function Z(e){Object(d.a)(e);var t=Object(i.b)();return Object(r.useEffect)((function(){t({type:v})})),Object(S.jsx)(j.a,{severity:"success",style:{width:"40vw",marginLeft:"30vw"},children:"Logout successful"})}function $(e){Object(d.a)(e);var t=Object(l.g)().search,a=new URLSearchParams(t).get("q"),s=Object(r.useState)([]),c=Object(u.a)(s,2),n=c[0],i=c[1];return Object(r.useEffect)((function(){C(a).then((function(e){i(e.data)})).catch((function(e){console.log(e),console.log("error"),i([])}))}),[a]),Object(S.jsx)("div",{style:{marginTop:"5%"},children:Object(S.jsx)("div",{className:"card-columns",style:{display:"inline-block"},children:void 0!==n?n.map((function(e){return Object(S.jsx)(o.b,{to:"/movies/"+e.imdbID,children:Object(S.jsxs)("div",{className:"card",style:{width:"18rem",margin:"1rem",height:"10rem",maxHeight:"10rem",display:"inline-block"},children:[Object(S.jsx)("img",{className:"card-img-top",src:e.Poster,alt:"Card image",height:"250",width:"350"}),Object(S.jsxs)("div",{className:"card-body",children:[Object(S.jsx)("h5",{className:"card-title",children:e.Title}),Object(S.jsx)("p",{className:"card-text",children:Object(S.jsxs)("small",{className:"text-muted",children:["released: ",e.Year]})})]})]})})})):Object(S.jsx)(j.a,{severity:"error",style:{marginLeft:"20%"},children:"No movies found"})})})}var ee=a(81),te=a.n(ee),ae=function(e){Object(l.f)();var t=Object(r.useState)({email:"",password:"",confirmPassword:"",name:"",username:""}),a=Object(u.a)(t,2),s=a[0],c=a[1],n=Object(r.useState)({code:0,message:""}),i=Object(u.a)(n,2),o=i[0],d=i[1],b=function(e){var t=e.target.name,a=e.target.value;c(Object(J.a)(Object(J.a)({},s),{},Object(H.a)({},t,a)))},h=function(){var e=Object(p.a)(m.a.mark((function e(t){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s.password!==s.confirmPassword){e.next=11;break}return e.next=4,w({email:s.email,password:s.password,username:s.username,name:s.name});case 4:a=e.sent,d({code:a.status,message:a.data}),c({email:"",password:"",confirmPassword:"",name:"",username:""}),r=201!==a.status?a.response.data:a.data,d({code:a.status,message:r}),e.next=12;break;case 11:d({code:-1,message:"Passwords dosen't match"});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(P.a)((function(e){return{margin:{marginTop:e.spacing(2),display:"block",width:250},container:{border:"1px solid white",boxShadow:"1px 1px 3px 1px gray",borderRadius:"5% 5%",padding:"2vw 0.5vw",width:"max-content",marginLeft:"auto",marginRight:"auto"},button:{marginTop:"0.5vw",marginLeft:"5vw"}}}))();return Object(S.jsx)("div",{children:Object(S.jsx)("form",{onSubmit:h,children:Object(S.jsxs)(K.a,{className:O.container,children:[Object(S.jsx)("h2",{style:{color:"#DB7C8C",textAlign:"center"},children:"Register"}),Object(S.jsxs)(Y.a,{theme:Object(V.a)({palette:{primary:W.a}}),children:[Object(S.jsx)(Q.a,{label:"Name",placeholder:"Enter your name",name:"name",autoComplete:"off",type:"text",onChange:b,className:O.margin,required:!0,value:s.name}),Object(S.jsx)(Q.a,{label:"User name",placeholder:"Enter username",name:"username",autoComplete:"off",type:"text",onChange:b,className:O.margin,value:s.username}),Object(S.jsx)(Q.a,{label:"Email",placeholder:"Enter email ID",name:"email",autoComplete:"off",type:"text",onChange:b,className:O.margin,required:!0,value:s.email}),Object(S.jsx)(Q.a,{label:"Password",placeholder:"Enter password",name:"password",autoComplete:"off",type:"password",onChange:b,className:O.margin,value:s.password,required:!0}),Object(S.jsx)(Q.a,{label:"Password",placeholder:"Confirm password",name:"confirmPassword",autoComplete:"off",type:"password",onChange:b,className:O.margin,value:s.confirmPassword}),Object(S.jsx)(B.a,{variant:"contained",size:"large",color:"secondary",className:O.button,startIcon:Object(S.jsx)(te.a,{}),type:"submit",children:"Save"})]}),201===o.code?Object(S.jsx)("div",{className:"message",children:Object(S.jsx)(j.a,{severity:"success",children:"Registration successful"})}):0!==o.code?Object(S.jsx)("div",{className:"message",children:Object(S.jsx)(j.a,{severity:"error",children:o.message})}):Object(S.jsx)(S.Fragment,{})]})})})},re=a(64),se={activeUser:null,userProfile:[]},ce={topMovies:[]},ne=Object(re.a)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(J.a)(Object(J.a)({},e),{},{activeUser:t.payload});case v:return Object(J.a)(Object(J.a)({},e),{},{activeUser:null});case g:return e.activeUser.user.bookmarks.push(t.payload),Object(J.a)(Object(J.a)({},e),{},{activeUser:Object(J.a)(Object(J.a)({},e.activeUser),{},{user:Object(J.a)(Object(J.a)({},e.activeUser.user),{},{bookmarks:e.activeUser.user.bookmarks})})});default:return e}},movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(J.a)(Object(J.a)({},e),{},{topMovies:t.payload});default:return e}}}),ie=Object(re.b)(ne);var oe=function(){return Object(S.jsx)("div",{children:Object(S.jsx)(o.a,{children:Object(S.jsxs)(i.a,{store:ie,children:[Object(S.jsx)(q,{}),Object(S.jsxs)(l.c,{children:[Object(S.jsx)(l.a,{exact:!0,path:"/",children:Object(S.jsx)(G,{})}),Object(S.jsx)(l.a,{exact:!0,path:"/login",children:Object(S.jsx)(X,{})}),Object(S.jsx)(l.a,{exact:!0,path:"/register",children:Object(S.jsx)(ae,{})}),Object(S.jsx)(l.a,{exact:!0,path:"/logout",children:Object(S.jsx)(Z,{})}),Object(S.jsx)(l.a,{exact:!0,path:"/movies/:imdbid",children:Object(S.jsx)(_,{})}),Object(S.jsx)(l.a,{exact:!0,path:"/search",children:Object(S.jsx)($,{})}),Object(S.jsx)(l.a,{exact:!0,path:"/mybookmarks",children:Object(S.jsx)(D,{})})]})]})})})};a(126),a(127),a(128);n.a.render(Object(S.jsx)(s.a.StrictMode,{children:Object(S.jsx)(oe,{})}),document.getElementById("root"))}},[[129,1,2]]]);
//# sourceMappingURL=main.71732992.chunk.js.map